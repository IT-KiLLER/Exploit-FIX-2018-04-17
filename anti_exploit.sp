
/*	Copyright (C) 2018 IT-KiLLER
	This program is free software: you can redistribute it and/or modify
	it under the terms of the GNU General Public License as published by
	the Free Software Foundation, either version 3 of the License, or
	(at your option) any later version.
	This program is distributed in the hope that it will be useful,
	but WITHOUT ANY WARRANTY; without even the implied warranty of
	MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
	GNU General Public License for more details.
	
	You should have received a copy of the GNU General Public License
	along with this program. If not, see <http://www.gnu.org/licenses/>.
*/

#include <sdktools>
#include <sdktools_sound>
#pragma semicolon 1
#pragma newdecls required

public Plugin myinfo = 
{
	name = "Exploit FIX: 2018-04-17",
	author = "IT-KiLLER",
	description = "",
	version = "1.0.2 pre-release",
	url = "https://github.com/IT-KiLLER"
};

public void OnPluginStart()
{
	AddNormalSoundHook(Hook_AntiHack);
	AddAmbientSoundHook(Hook_AntiHack2);
}

public Action Hook_AntiHack(int clients[64], int &numClients, char sample[PLATFORM_MAX_PATH], int &entity, int &channel, float &volume, int &level, int &pitch, int &flags)
{
	if(sample[0] == '\0' || sample[0] == 'c' && (StrEqual(sample, "common\null.wav") || StrEqual(sample, "common/null.wav")))
	{
		return Plugin_Stop;
	}
	return Plugin_Continue;
}

public Action Hook_AntiHack2(char sample[PLATFORM_MAX_PATH], int &entity, float &volume, int &level, int &pitch, float pos[3], int &flags, float &delay)
{
	if(sample[0] == '\0' || sample[0] == 'c' && (StrEqual(sample, "common\null.wav") || StrEqual(sample, "common/null.wav")))
	{
		return Plugin_Stop;
	}
	return Plugin_Continue;
}